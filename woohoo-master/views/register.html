<!DOCTYPE html>
<html lang="en" style="font-size: 15px;">

<head>
  <meta charset="utf-8">
  <title>Register</title>
  <link rel="stylesheet" type="text/css" href="../css/register.css" />
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
  <div class="register_page">
    <div class="logo_part">
      <a href="index.html">
        <img class="logo" src="../image/logo.png" />
      </a>
    </div>
    <h1 dir="auto" role="heading" class="register_title">
      <span>Register</span>
    </h1>

    <!-- changed action to /register -->
    <form novalidate class="information" id="regForm" method="post">
      <div class="username_box">
        <div class="username_box2" dir="auto">
          <div>
            <span class="username_title">Username</span>
          </div>
          <div dir="auto">
            <!-- changed name from "session[username_or_email]" to email -->
            <input name="username" type="text" id="username" dir="auto" class="input_username">
          </div>
        </div>
      </div>
      <div class="password_box">
        <div class="password_box2" dir="auto">
          <div>
            <span class="password_title">Phone</span>
          </div>
          <div dir="auto">
            <!-- changed name from "session[password]" to password -->
            <input name="password" type="text" id="phone" dir="auto" class="input_password">
          </div>
        </div>
      </div>
      <div class="password_box">
        <div class="password_box2" dir="auto">
          <div>
            <span class="password_title">Passward</span>
          </div>
          <div dir="auto">
            <!-- changed name from "session[password]" to password -->
            <input name="password" type="password" id="password" dir="auto" class="input_password">
          </div>
        </div>
      </div>
      <div class="password_box">
        <div class="password_box2" dir="auto">
          <div>
            <span class="password_title">Confirm Passward</span>
          </div>
          <div dir="auto">
            <!-- changed name from "session[password]" to password -->
            <input name="confirm_password" id="confirmPassword" type="password" dir="auto" class="input_password">
          </div>
        </div>
      </div>

      <div role="button" class="button_box data-testid=" Register_Button>
        <div dir="auto" class="">
          <!--change button to input type =submit-->
          <input type="submit" id="regBtn" value="register" name="" class="register_button">
        </div>
      </div>
    </form>

    <div class="tool_box">
      <a href="login.html" role="link" class="login" style="text-decoration:none;">
        Login
      </a>
    </div>
  </div>
  <script src="../script/common.js"></script>
  <script src="../script/login_reg_script.js"></script>
  <script>
    function regMethod() {
      $.post(`${baseUrl}/users/register`, {
        username: $("#username").val(),
        password: $("#password").val(),
        phone: $("#phone").val(),
        confirmPassword: $("#confirmPassword").val(),
      }).then(res => {
        alert(res.message)
        if (res.code !== 200) return;
        location.href = "./login.html";
      })
    }
    $(function () {
      // 注册事件
      $("#regBtn").click(e => {
        e.preventDefault();
        regMethod();
      })
    })
  </script>
</body>

</html>